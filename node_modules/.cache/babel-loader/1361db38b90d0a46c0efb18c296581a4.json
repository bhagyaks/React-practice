{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\jojoj\\\\OneDrive\\\\Jojo\\\\Files\\\\Resume\\\\bhagya\\\\code\\\\veriff-assignment\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\jojoj\\\\OneDrive\\\\Jojo\\\\Files\\\\Resume\\\\bhagya\\\\code\\\\veriff-assignment\\\\src\\\\FetchCheck.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport \"./styles.css\";\nimport { fetchChecks, submitCheckResults } from \"./api\";\nimport \"./Button.css\";\nimport \"./FetchCheck.css\";\nimport Button from \"./Button\";\n\nvar FetchCheck = function FetchCheck(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      checks = _useState2[0],\n      setChecks = _useState2[1];\n\n  var history = useHistory();\n  var results = [],\n      dataArray = [];\n  useEffect(function () {\n    fetchChecks().then(function (p) {\n      return setChecks(p);\n    });\n  }, []);\n\n  if (checks === null) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 9\n    }\n  }, checks.sort(function (a, b) {\n    return a.priority > b.priority ? 1 : -1;\n  }).map(function (check, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: check.id,\n      className: \"container \".concat(disableElement(check, index)),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"question\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 21\n      }\n    }, check.description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab\",\n      value: \"\",\n      id: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"yes\",\n      tabIndex: \"-1\",\n      value: \"Yes\",\n      onClick: handleButton,\n      autoFocus: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 25\n      }\n    }, \"Yes\"), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"no\",\n      tabIndex: \"-1\",\n      value: \"No\",\n      onClick: handleButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 25\n      }\n    }, \"No\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit_section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: disabled,\n    id: \"app_submit\",\n    onClick: submitData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 45\n    }\n  }, \"Submit\")));\n  /**\r\n  * @param check - check \r\n  * @param i - index of div\r\n  * disables all elements except first div. create data array, to  update yes no button values\r\n  */\n\n  function disableElement(check, index) {\n    dataArray[index] = {\n      'id': index,\n      'checkId': check.id,\n      'value': null\n    };\n    return checks[0] === check ? false : \"disabled\";\n  }\n  /**\r\n  * @param event - check \r\n  * handle thew mouse on click of  yes and no button to enable and disable next and previous children\r\n  */\n\n\n  function handleButton(event) {\n    event.target.parentNode.childNodes.forEach(function (e) {\n      e.classList.remove(\"active\");\n    });\n    event.target.classList.add(\"active\");\n\n    if (event.target) {\n      dataArray[Number(event.target.parentNode.id)].value = event.target.value;\n\n      if (event.target.value === \"Yes\") {\n        enableNextQuestion(Number(event.target.parentNode.id) + 1);\n      } else {\n        updateOnNo(Number(event.target.parentNode.id) + 1);\n      }\n    }\n  }\n  /**\r\n  * @param check - element id \r\n  * enable elements and submit button enables/disabled based on yes/no button.\r\n  */\n\n\n  function enableNextQuestion(elementId) {\n    if (document.getElementById(elementId)) {\n      document.getElementById(elementId).parentElement.classList.remove(\"disabled\");\n      document.getElementById(\"app_submit\").setAttribute(\"disabled\", \"true\");\n    } else {\n      document.getElementById(\"app_submit\").removeAttribute(\"disabled\");\n    }\n  }\n  /**\r\n  * @param check - element id \r\n  * disable elements and submit button enables/disabled based on yes/no button.\r\n  */\n\n\n  function updateOnNo(elementId) {\n    for (var i = elementId; i < dataArray.length; i++) {\n      dataArray[i].value = null;\n      document.getElementById(i).parentElement.classList.add(\"disabled\");\n      document.getElementById(i).childNodes.forEach(function (e) {\n        e.classList.remove(\"active\");\n      });\n    }\n\n    document.getElementById(\"app_submit\").removeAttribute(\"disabled\");\n  }\n  /**\r\n  * submit the data and catch error if submission failed\r\n  */\n\n\n  function submitData() {\n    var finalData = [];\n\n    for (var i = 0; i < dataArray.length; i++) {\n      if (dataArray[i].value !== null) {\n        finalData[i] = {\n          'checkId': dataArray[i].checkId,\n          'result': dataArray[i].value\n        };\n      }\n    }\n\n    submitCheckResults(results).then(function () {\n      history.push(\"./success\");\n    }).catch(function () {\n      alert(\"Submission Failed!!!\");\n      window.location.reload();\n    });\n  }\n};\n\nexport default FetchCheck;","map":{"version":3,"sources":["C:/Users/jojoj/OneDrive/Jojo/Files/Resume/bhagya/code/veriff-assignment/src/FetchCheck.js"],"names":["React","useEffect","useState","useHistory","fetchChecks","submitCheckResults","Button","FetchCheck","props","checks","setChecks","history","results","dataArray","then","p","sort","a","b","priority","map","check","index","id","disableElement","description","handleButton","disabled","submitData","event","target","parentNode","childNodes","forEach","e","classList","remove","add","Number","value","enableNextQuestion","updateOnNo","elementId","document","getElementById","parentElement","setAttribute","removeAttribute","i","length","finalData","checkId","push","catch","alert","window","location","reload"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,cAAP;AACA,SAAQC,WAAR,EAAqBC,kBAArB,QAA8C,OAA9C;AACA,OAAO,cAAP;AACA,OAAO,kBAAP;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAC1B,kBAA4BN,QAAQ,CAAC,IAAD,CAApC;AAAA;AAAA,MAAOO,MAAP;AAAA,MAAeC,SAAf;;AACA,MAAMC,OAAO,GAAGR,UAAU,EAA1B;AACA,MAAIS,OAAO,GAAG,EAAd;AAAA,MAAkBC,SAAS,GAAC,EAA5B;AACAZ,EAAAA,SAAS,CAAC,YAAM;AACZG,IAAAA,WAAW,GAAGU,IAAd,CAAmB,UAAAC,CAAC;AAAA,aAAIL,SAAS,CAACK,CAAD,CAAb;AAAA,KAApB;AACH,GAFQ,EAEN,EAFM,CAAT;;AAGA,MAAIN,MAAM,KAAK,IAAf,EAAqB;AACjB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACH;;AACD,sBACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,MAAM,CAACO,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAf,GAA0B,CAA1B,GAA8B,CAAC,CAAzC;AAAA,GAAZ,EAAwDC,GAAxD,CAA4D,UAACC,KAAD,EAAQC,KAAR;AAAA,wBACzD;AAAM,MAAA,GAAG,EAAED,KAAK,CAACE,EAAjB;AAAsB,MAAA,SAAS,sBAAeC,cAAc,CAACH,KAAD,EAAQC,KAAR,CAA7B,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2BD,KAAK,CAACI,WAAjC,CADJ,eAEI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAqB,MAAA,KAAK,EAAC,EAA3B;AAA8B,MAAA,EAAE,EAAEH,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,EAAE,EAAC,KAAX;AAAiB,MAAA,QAAQ,EAAC,IAA1B;AAAgC,MAAA,KAAK,EAAE,KAAvC;AAA8C,MAAA,OAAO,EAAEI,YAAvD;AAAqE,MAAA,SAAS,EAAE,IAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAQ,MAAA,EAAE,EAAC,IAAX;AAAgB,MAAA,QAAQ,EAAC,IAAzB;AAA+B,MAAA,KAAK,EAAE,IAAtC;AAA4C,MAAA,OAAO,EAAEA,YAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CAFJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ,CADyD;AAAA,GAA5D,CADL,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,eAYI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAgC,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEC,QAAlB;AAA4B,IAAA,EAAE,EAAC,YAA/B;AAA4C,IAAA,OAAO,EAAEC,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAhC,CAZJ,CADJ;AAgBC;AACL;AACA;AACA;AACA;;AACI,WAASJ,cAAT,CAAwBH,KAAxB,EAA8BC,KAA9B,EAAqC;AACjCT,IAAAA,SAAS,CAACS,KAAD,CAAT,GAAiB;AAAC,YAAMA,KAAP;AAAa,iBAAUD,KAAK,CAACE,EAA7B;AAAiC,eAAU;AAA3C,KAAjB;AACA,WAAOd,MAAM,CAAC,CAAD,CAAN,KAAcY,KAAd,GAAsB,KAAtB,GAA8B,UAArC;AACH;AACD;AACJ;AACA;AACA;;;AACI,WAASK,YAAT,CAAsBG,KAAtB,EAA6B;AACzBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBC,UAAxB,CAAmCC,OAAnC,CAA2C,UAAAC,CAAC,EAAI;AAC5CA,MAAAA,CAAC,CAACC,SAAF,CAAYC,MAAZ,CAAmB,QAAnB;AACH,KAFD;AAGAP,IAAAA,KAAK,CAACC,MAAN,CAAaK,SAAb,CAAuBE,GAAvB,CAA2B,QAA3B;;AACA,QAAIR,KAAK,CAACC,MAAV,EAAkB;AACdjB,MAAAA,SAAS,CAACyB,MAAM,CAACT,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBR,EAAzB,CAAP,CAAT,CAA8CgB,KAA9C,GAAsDV,KAAK,CAACC,MAAN,CAAaS,KAAnE;;AACA,UAAIV,KAAK,CAACC,MAAN,CAAaS,KAAb,KAAuB,KAA3B,EAAkC;AAC9BC,QAAAA,kBAAkB,CAACF,MAAM,CAACT,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBR,EAAzB,CAAN,GAAqC,CAAtC,CAAlB;AACH,OAFD,MAGK;AACDkB,QAAAA,UAAU,CAACH,MAAM,CAACT,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBR,EAAzB,CAAN,GAAqC,CAAtC,CAAV;AACH;AACJ;AACJ;AACA;AACL;AACA;AACA;;;AACI,WAASiB,kBAAT,CAA4BE,SAA5B,EAAuC;AACnC,QAAIC,QAAQ,CAACC,cAAT,CAAwBF,SAAxB,CAAJ,EAAwC;AACpCC,MAAAA,QAAQ,CAACC,cAAT,CAAwBF,SAAxB,EAAmCG,aAAnC,CAAiDV,SAAjD,CAA2DC,MAA3D,CAAkE,UAAlE;AACAO,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCE,YAAtC,CAAmD,UAAnD,EAA+D,MAA/D;AACH,KAHD,MAIK;AACDH,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCG,eAAtC,CAAsD,UAAtD;AACH;AACJ;AACA;AACL;AACA;AACA;;;AACI,WAASN,UAAT,CAAoBC,SAApB,EAA8B;AAC1B,SAAK,IAAIM,CAAC,GAACN,SAAX,EAAqBM,CAAC,GAACnC,SAAS,CAACoC,MAAjC,EAAwCD,CAAC,EAAzC,EACA;AACInC,MAAAA,SAAS,CAACmC,CAAD,CAAT,CAAaT,KAAb,GAAmB,IAAnB;AACAI,MAAAA,QAAQ,CAACC,cAAT,CAAwBI,CAAxB,EAA2BH,aAA3B,CAAyCV,SAAzC,CAAmDE,GAAnD,CAAuD,UAAvD;AACCM,MAAAA,QAAQ,CAACC,cAAT,CAAwBI,CAAxB,EAA2BhB,UAA5B,CAAwCC,OAAxC,CAAgD,UAAAC,CAAC,EAAI;AACjDA,QAAAA,CAAC,CAACC,SAAF,CAAYC,MAAZ,CAAmB,QAAnB;AACH,OAFD;AAGH;;AACDO,IAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCG,eAAtC,CAAsD,UAAtD;AACH;AACO;AACZ;AACA;;;AACI,WAASnB,UAAT,GAAsB;AAClB,QAAIsB,SAAS,GAAG,EAAhB;;AACA,SAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnC,SAAS,CAACoC,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,UAAInC,SAAS,CAACmC,CAAD,CAAT,CAAaT,KAAb,KAAuB,IAA3B,EAAiC;AAC7BW,QAAAA,SAAS,CAACF,CAAD,CAAT,GAAe;AAAE,qBAAWnC,SAAS,CAACmC,CAAD,CAAT,CAAaG,OAA1B;AAAmC,oBAAUtC,SAAS,CAACmC,CAAD,CAAT,CAAaT;AAA1D,SAAf;AACH;AACJ;;AACDlC,IAAAA,kBAAkB,CAACO,OAAD,CAAlB,CAA4BE,IAA5B,CAAiC,YAAM;AACnCH,MAAAA,OAAO,CAACyC,IAAR,CAAa,WAAb;AACF,KAFF,EAEIC,KAFJ,CAEU,YAAM;AACXC,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,KALF;AAMH;AACJ,CAnGD;;AAoGE,eAAelD,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport \"./styles.css\";\r\nimport {fetchChecks, submitCheckResults} from \"./api\";\r\nimport \"./Button.css\";\r\nimport \"./FetchCheck.css\";\r\nimport Button from \"./Button\";\r\nconst FetchCheck = (props) => {\r\n    const [checks, setChecks] = useState(null);\r\n    const history = useHistory();\r\n    let results = [], dataArray=[];\r\n    useEffect(() => {\r\n        fetchChecks().then(p => setChecks(p));\r\n    }, []);\r\n    if (checks === null) {\r\n        return <h2>Loading...</h2>;\r\n    }\r\n    return (\r\n        <div className=\"App\">\r\n            {checks.sort((a, b) => a.priority > b.priority ? 1 : -1).map((check, index) => (\r\n                <div  key={check.id}  className={`container ${disableElement(check, index)}`} >\r\n                    <div className=\"question\">{check.description}</div>\r\n                    <div className=\"tab\" value=\"\" id={index}>\r\n                        <button id=\"yes\" tabIndex=\"-1\"  value={\"Yes\"} onClick={handleButton} autoFocus={true}>Yes</button>\r\n                        <button id=\"no\" tabIndex=\"-1\"  value={\"No\"} onClick={handleButton}>No</button>\r\n                    </div>\r\n                    <br />\r\n                </div>\r\n            ))}\r\n            <br />\r\n            <div className=\"submit_section\"><Button disabled={disabled} id=\"app_submit\" onClick={submitData}>Submit</Button></div>\r\n        </div>\r\n    );\r\n     /**\r\n   * @param check - check \r\n   * @param i - index of div\r\n   * disables all elements except first div. create data array, to  update yes no button values\r\n   */\r\n    function disableElement(check,index) {\r\n        dataArray[index]={'id': index,'checkId':check.id, 'value' : null};\r\n        return checks[0] === check ? false : \"disabled\"; \r\n    }\r\n    /**\r\n   * @param event - check \r\n   * handle thew mouse on click of  yes and no button to enable and disable next and previous children\r\n   */\r\n    function handleButton(event) {\r\n        event.target.parentNode.childNodes.forEach(e => {\r\n            e.classList.remove(\"active\");\r\n        });\r\n        event.target.classList.add(\"active\");\r\n        if (event.target) {\r\n            dataArray[Number(event.target.parentNode.id)].value = event.target.value;\r\n            if (event.target.value === \"Yes\") {\r\n                enableNextQuestion(Number(event.target.parentNode.id) + 1);\r\n            }\r\n            else {\r\n                updateOnNo(Number(event.target.parentNode.id) + 1);\r\n            }\r\n        }\r\n    }\r\n     /**\r\n   * @param check - element id \r\n   * enable elements and submit button enables/disabled based on yes/no button.\r\n   */\r\n    function enableNextQuestion(elementId) {\r\n        if (document.getElementById(elementId)) {\r\n            document.getElementById(elementId).parentElement.classList.remove(\"disabled\");\r\n            document.getElementById(\"app_submit\").setAttribute(\"disabled\", \"true\");\r\n        }\r\n        else {\r\n            document.getElementById(\"app_submit\").removeAttribute(\"disabled\");\r\n        }\r\n    }\r\n     /**\r\n   * @param check - element id \r\n   * disable elements and submit button enables/disabled based on yes/no button.\r\n   */\r\n    function updateOnNo(elementId){\r\n        for (let i=elementId;i<dataArray.length;i++)\r\n        {\r\n            dataArray[i].value=null;\r\n            document.getElementById(i).parentElement.classList.add(\"disabled\");\r\n            (document.getElementById(i).childNodes).forEach(e => {\r\n                e.classList.remove(\"active\");\r\n            });\r\n        }\r\n        document.getElementById(\"app_submit\").removeAttribute(\"disabled\");\r\n    }\r\n            /**\r\n   * submit the data and catch error if submission failed\r\n   */\r\n    function submitData() {\r\n        let finalData = [];\r\n        for (let i = 0; i < dataArray.length; i++) {\r\n            if (dataArray[i].value !== null) {\r\n                finalData[i] = { 'checkId': dataArray[i].checkId, 'result': dataArray[i].value };\r\n            }\r\n        }\r\n        submitCheckResults(results).then(() => {\r\n            history.push(\"./success\");\r\n         }).catch(() => {\r\n             alert(\"Submission Failed!!!\");\r\n             window.location.reload();\r\n         });\r\n    }\r\n}\r\n  export default FetchCheck;"]},"metadata":{},"sourceType":"module"}